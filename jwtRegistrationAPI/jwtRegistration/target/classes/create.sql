drop table REGISTER;
drop table course;
drop table student;

create table COURSE
(
    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1) primary key,
    NAME     VARCHAR(50),
    CAPACITY INTEGER
);

create table STUDENT
(
    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1) primary key,
    NAME     VARCHAR(50),
    AGE INTEGER
);

create table REGISTER
(
    ID        BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1) primary key,
    STUDENTID BIGINT not null references STUDENT,
    COURSEID  BIGINT not null references COURSE
);

INSERT INTO COURSE (NAME, CAPACITY) VALUES ('CP3231', 20);
INSERT INTO COURSE (NAME, CAPACITY) VALUES ('CP3230', 20);
INSERT INTO COURSE (NAME, CAPACITY) VALUES ('EP1240', 40);
INSERT INTO COURSE (NAME, CAPACITY) VALUES ('CM1000', 5);

INSERT INTO STUDENT (NAME, AGE) VALUES ('Joe', 22);
INSERT INTO STUDENT (NAME, AGE) VALUES ('Ann', 16);
INSERT INTO STUDENT (NAME, AGE) VALUES ('Fred', 23);