/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
set schema PUBLIC
drop table jwt_User if exists CASCADE
create table jwt_User (\u000d\u000a                          id bigint primary key GENERATED ALWAYS AS IDENTITY(START WITH 1),\u000d\u000a                          username varchar(50) not null\u000d\u000a                              constraint JWT_USER_USERNAME_UINDEX\u000d\u000a                                  unique,\u000d\u000a                          password varchar(60) not null,\u000d\u000a                          role varchar(50)\u000d\u000a)
DROP TABLE ADVERTISER IF EXISTS CASCADE
DROP TABLE ADVERT IF EXISTS CASCADE
DROP TABLE USER IF EXISTS CASCADE
DROP TABLE COUPON IF EXISTS CASCADE
DROP TABLE "ORDER" IF EXISTS CASCADE
DROP TABLE EXPERIENCE IF EXISTS CASCADE
DROP TABLE OCCASION IF EXISTS CASCADE
DROP TABLE PART IF EXISTS CASCADE
DROP TABLE CUSTOM IF EXISTS CASCADE
DROP TABLE CUSTOM_PART IF EXISTS CASCADE
DROP TABLE ANALYTICS IF EXISTS CASCADE
DROP TABLE NORMAL IF EXISTS CASCADE
DROP TABLE PRODUCT IF EXISTS CASCADE
DROP TABLE ORDER_ITEM IF EXISTS CASCADE
DROP TABLE BRANCH IF EXISTS CASCADE
create table ADVERTISER\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint ADVERTISER_PK\u000d\u000a            primary key,\u000d\u000a    USERNAME VARCHAR(50) not null\u000d\u000a        constraint ADVERTISER_JWT_USER_USERNAME_FK\u000d\u000a            references JWT_USER (USERNAME),\u000d\u000a    COMPANY_NAME VARCHAR(30) not null,\u000d\u000a    AD_AMNT INTEGER not null,\u000d\u000a    PRICE_PER_AD INTEGER not null,\u000d\u000a    DISPLAY CHAR(1) not null\u000d\u000a)
CREATE TABLE ADVERT\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint ADVERT_PK\u000d\u000a            primary key,\u000d\u000a    ADVERTISER_ID BIGINT not null\u000d\u000a        constraint ADVERT_ID_ADVERTISER_ID_FK FOREIGN KEY\u000d\u000a            references ADVERTISER,\u000d\u000a    DESC VARCHAR(250) not null,\u000d\u000a    IMAGE VARCHAR(20) not null,\u000d\u000a    SLOT INTEGER NULL,\u000d\u000a    DISPLAY CHAR(1) NOT NULL\u000d\u000a)
create table USER\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint USER_PK\u000d\u000a            primary key,\u000d\u000a    USERNAME VARCHAR(50) not null\u000d\u000a        constraint USER_USERNAME_JWT_USERNAME_FK\u000d\u000a            references JWT_USER (USERNAME),\u000d\u000a    FIRST_NAME VARCHAR(30) not null,\u000d\u000a    LAST_NAME VARCHAR(30) null,\u000d\u000a    ADDRESS VARCHAR(250) null,\u000d\u000a    EMAIL VARCHAR(50) null,\u000d\u000a    MAILING CHAR(1) not null,\u000d\u000a    POINTS INTEGER not null,\u000d\u000a    LANGUAGE CHAR(2) not null\u000d\u000a)
create table COUPON\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint COUPON_ID\u000d\u000a            primary key,\u000d\u000a    USER_ID BIGINT not null\u000d\u000a        constraint COUPON_USER_ID_USER_ID_FK\u000d\u000a            references USER,\u000d\u000a    DISCOUNT INTEGER NOT NULL,\u000d\u000a    CODE VARCHAR(6) not null,\u000d\u000a    EXPIRE DATE not null,\u000d\u000a    DESC VARCHAR(250) NOT NULL\u000d\u000a)
CREATE TABLE BRANCH\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint BRANCH_PK\u000d\u000a            primary key,\u000d\u000a    NAME VARCHAR(50) NOT NULL,\u000d\u000a    PROVINCE VARCHAR(30) NOT NULL,\u000d\u000a    LON INT NOT NULL,\u000d\u000a    LAT INT NOT NULL\u000d\u000a)
create table "ORDER"\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint ORDER_PK\u000d\u000a            primary key,\u000d\u000a    USER_ID BIGINT not null\u000d\u000a        constraint ORDER_USER_ID_USER_ID_FK\u000d\u000a            references USER,\u000d\u000a    BRANCH_ID BIGINT not null\u000d\u000a        constraint ORDER_BRANCH_ID_BRANCH_ID_FK\u000d\u000a            references BRANCH,\u000d\u000a    DATE DATE not null,\u000d\u000a    TOTAL INTEGER not null,\u000d\u000a    PAYMENT_METHOD CHAR(1) not null,\u000d\u000a    PAID CHAR(1) not null,\u000d\u000a    LAST_ACCESS DATE not null,\u000d\u000a    DINEIN CHAR(1) NOT NULL\u000d\u000a)
create table EXPERIENCE\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint EXPERIENCE_ID\u000d\u000a            primary key,\u000d\u000a    ORDER_ID BIGINT unique not null\u000d\u000a        constraint EXPERIENCE_ORDER_ID_ORDER_ID_FK\u000d\u000a            references "ORDER",\u000d\u000a    STARS INTEGER not null\u000d\u000a)
create table OCCASION\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint OCCASION_PK\u000d\u000a            primary key,\u000d\u000a    NAME VARCHAR(30) not null,\u000d\u000a    DISCOUNT INTEGER NOT NULL,\u000d\u000a    START_DATE DATE NOT NULL,\u000d\u000a    END_DATE DATE NOT NULL\u000d\u000a)
CREATE TABLE PART\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint PART_PK\u000d\u000a            primary key,\u000d\u000a    NAME VARCHAR(30) NOT NULL,\u000d\u000a    TYPE VARCHAR(30) NOT NULL,\u000d\u000a    PRICE INTEGER NOT NULL,\u000d\u000a    IMAGE VARCHAR(20) NOT NULL,\u000d\u000a    POSITION CHAR(1) NOT NULL,\u000d\u000a    REQUIRED CHAR(1) NOT NULL\u000d\u000a)
CREATE TABLE CUSTOM\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint CUSTOM_PK\u000d\u000a            PRIMARY KEY,\u000d\u000a    NAME VARCHAR(30) NOT NULL,\u000d\u000a    DESC VARCHAR(250) NOT NULL,\u000d\u000a    DATE DATE NOT NULL,\u000d\u000a    TYPE VARCHAR(30) NOT NULL,\u000d\u000a    TOTAL INTEGER NOT NULL,\u000d\u000a    OCCASION_ID BIGINT NOT NULL\u000d\u000a        constraint CUSTOM_OCCASION_ID_OCCASION_ID_FK FOREIGN KEY\u000d\u000a            REFERENCES OCCASION\u000d\u000a)
CREATE TABLE CUSTOM_PART\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint CUSTOM_PART_PK\u000d\u000a            primary key,\u000d\u000a    PART_ID BIGINT not null\u000d\u000a        constraint CUSTOM_PART_PART_ID_PART_ID_FK\u000d\u000a            references PART,\u000d\u000a    CUSTOM_ID BIGINT not null\u000d\u000a        constraint CUSTOM_PART_CUSTOM_ID_CUSTOM_ID_FK\u000d\u000a            references CUSTOM\u000d\u000a)
CREATE TABLE NORMAL\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint NORMAL_PK\u000d\u000a            PRIMARY KEY,\u000d\u000a    NAME VARCHAR(30) NOT NULL,\u000d\u000a    DESC VARCHAR(250) NOT NULL,\u000d\u000a    IMAGE VARCHAR(20) NOT NULL,\u000d\u000a    TYPE VARCHAR(30) NOT NULL,\u000d\u000a    PRICE INTEGER NOT NULL,\u000d\u000a    STOCK CHAR(1) NOT NULL,\u000d\u000a    QUANTITY INTEGER NOT NULL,\u000d\u000a    OCCASION_ID BIGINT NOT NULL\u000d\u000a        constraint NORMAL_OCCASION_ID_OCCASION_ID_FK FOREIGN KEY\u000d\u000a            references OCCASION\u000d\u000a)
CREATE TABLE PRODUCT\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint PRODUCT_PK\u000d\u000a            primary key,\u000d\u000a    CUSTOM_ID BIGINT unique not null\u000d\u000a        constraint PRODUCT_CUSTOM_ID_CUSTOM_ID_FK\u000d\u000a            references CUSTOM,\u000d\u000a    NORMAL_ID BIGINT not null\u000d\u000a        constraint PRODUCT_NORMAL_ID_NORMAL_ID_FK\u000d\u000a            references NORMAL\u000d\u000a)
CREATE TABLE ANALYTICS\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint ANALYTICS_PK\u000d\u000a            PRIMARY KEY,\u000d\u000a    PAGE CHAR(1) NOT NULL,\u000d\u000a    PRODUCT_ID BIGINT NOT NULL\u000d\u000a        constraint ANALYTICS_PRODUCT_ID_PRODUCT_ID_FK FOREIGN KEY\u000d\u000a            references PRODUCT,\u000d\u000a    DATE DATE NOT NULL,\u000d\u000a    TIME INT NOT NULL,\u000d\u000a    USERNAME VARCHAR(50) not null\u000d\u000a        constraint ANALYTICS_USERNAME_JWT_USERNAME_FK\u000d\u000a            references JWT_USER (USERNAME),\u000d\u000a)
CREATE TABLE ORDER_ITEM\u000d\u000a(\u000d\u000a    ID BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1)\u000d\u000a        constraint ORDER_ITEM_PK\u000d\u000a            primary key,\u000d\u000a    ORDER_ID BIGINT unique not null\u000d\u000a        constraint ORDER_ITEM_ORDER_ID_FK\u000d\u000a            references "ORDER",\u000d\u000a    PRODUCT_ID BIGINT not null\u000d\u000a        constraint ORDER_ITEM_PRODUCT_ID_FK\u000d\u000a            references PRODUCT\u000d\u000a)
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/DISCONNECT
